<!--<link rel='stylesheet' media='screen and (min-width: 320px) and (max-width: 780px)' href='assets/styles/medium.css' />-->


<!--<div ng-controller="mapModuleController" class="row-fluid">-->
<div ng-controller="MapModuleController">
  <h1 class="mobile">map</h1>
  <section class="mobile_page map_page" id="map_page">
    <!--Giving the div an id="map_canvas" fix problems with twitter bootstrap affecting google maps-->
    <div id="map_canvas" ui-map="map" class="span8 map"
         ui-event="{'map-bounds_changed': 'updateMapBounds()'}"
         ui-options="mapOptions">
    </div>
    <!--ui-event="{'map-bounds_changed': 'updateMapBounds()', 'map-center_changed': 'updateCurrentLocationFromMapCenter()'}"-->


    <!-- this is the confusing part. we have to point the map marker directive
        at an existing google.maps.Marker object, so it can hook up events -->
    <div ng-repeat="meeting in meetings" ui-map-marker="meeting.marker"
         ui-event="{'map-click': 'openMarkerInfo(meeting)'}">
    </div>

    <div ui-map-marker="currentLocationMarker"><!-- current location marker --></div>

    <div ui-map-info-window="myInfoWindow" >
      <ng-include src="infoWindowUrl" ng-controller="infoWindowController"></ng-include>
    </div>
  </section>


</div>

